-- The biggest tables
SELECT TABLE_SCHEMA, TABLE_NAME, ENGINE,
    TABLE_ROWS,
    ROUND(DATA_LENGTH / (1024 * 1024), 2) AS DATA_SIZE_MB,
    ROUND(INDEX_LENGTH / (1024 * 1024), 2) AS INDEX_SIZE_MB,
    ROUND((DATA_LENGTH + INDEX_LENGTH) / (1024 * 1024), 2) AS TOTAL_SIZE_MB
FROM information_schema.TABLES
WHERE TABLE_SCHEMA=DATABASE() -- the current schema only
ORDER BY TOTAL_SIZE_MB DESC
LIMIT 10;

-- The biggest table groups
SELECT SUBSTRING_INDEX(TABLE_NAME, "_", 1) AS TABLE_NAMES_PREFIX,
    COUNT(*) AS TABLES_COUNT,
    SUM(TABLE_ROWS) AS TOTAL_ROWS_COUNT,
    GROUP_CONCAT(DISTINCT ENGINE) AS TABLE_ENGINES
FROM information_schema.TABLES
WHERE TABLE_SCHEMA=DATABASE() -- the current schema only
AND TABLE_NAME REGEXP "_[0-9]+$"
GROUP BY TABLE_NAMES_PREFIX;

-- Table group prefix detection at MySQL 8.0+
-- SELECT REGEXP_REPLACE("TABLE_NAME_123", "[0-9]+$", "");

-- Autoincrement fields info
SELECT t.TABLE_SCHEMA, t.TABLE_NAME, c.COLUMN_NAME, c.COLUMN_TYPE, t.AUTO_INCREMENT
FROM information_schema.TABLES AS t
INNER JOIN information_schema.COLUMNS AS c USING(TABLE_SCHEMA, TABLE_NAME)
WHERE t.AUTO_INCREMENT IS NOT NULL
AND c.EXTRA='auto_increment'
AND t.TABLE_SCHEMA=DATABASE();
